const microdown=function(){var c=(e,r,n)=>`<${e+(n?" "+Object.keys(n).map(e=>n[e]?`${e}="${p(n[e])||""}"`:"").join(" "):"")}>${r}</${e}>`,p=e=>e?e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"",t=/(?:(^|\n)([+-]|\d+\.) +(.*(\n[ \t]+.*)*))+/g,a=(e,r)=>(r=e.match(/^[+-]/m)?"ul":"ol",e?`<${r}>${e.replace(/(?:[+-]|\d+\.) +(.*)\n?(([ \t].*\n?)*)/g,(e,r,n)=>{return`<li>${i(r+`
`+(r=n||"",r.replace(new RegExp("^"+(r.match(/^\s+/)||"")[0],"gm"),"").replace(t,a)))}</li>`})}</${r}>`:""),r=(n,t,l,a)=>(e,r)=>(e=e.replace(t,l),c(n,a?a(e):e)),n=(e,l)=>g(e,[/<!--((.|\n)*?)-->/g,"\x3c!--$1--\x3e",/^("""|```)(.*)\n((.*\n)*?)\1/gm,(e,r,n,t)=>'"""'===r?c("div",o(t,l),{class:n}):l&&l.preCode?c("pre",c("code",p(t),{class:n})):c("pre",p(t),{class:n}),/(^>.*\n?)+/gm,r("blockquote",/^> ?(.*)$/gm,"$1",s),/((^|\n)\|.+)+/g,r("table",/^.*(\n\|---.*?)?$/gm,(e,t)=>r("tr",/\|(-?)([^|]*)\1(\|$)?/gm,(e,r,n)=>c(r||t?"th":"td",i(n)))(e.slice(0,e.length-(t||"").length))),t,a,/#\[([^\]]+?)]/g,'<a name="$1"></a>',/^(#+) +(.*)(?:$)/gm,(e,r,n)=>c("h"+r.length,i(n)),/^(===+|---+)(?=\s*$)/gm,"<hr>"],o,l),i=(e,a)=>{var g=[],n=e=>e.replace(/\\(\d+)/g,(e,r)=>n(g[Number.parseInt(r)-1]));return e=(e||"").trim().replace(/`([^`]*)`/g,(e,r)=>"\\"+g.push(c("code",p(r)))).replace(/[!&]?\[([!&]?\[.*?\)|[^\]]*?)]\((.*?)( .*?)?\)|(\w+:\/\/[$\-.+!*'()/,\w]+)/g,(e,r,n,t,l)=>l?a?e:"\\"+g.push(c("a",l,{href:l})):"&"==e[0]?(r=r.match(/^(.+),(.+),([^ \]]+)( ?.+?)?$/),"\\"+g.push(c("iframe","",{width:r[1],height:r[2],frameborder:r[3],class:r[4],src:n,title:t}))):"\\"+g.push("!"==e[0]?c("img","",{src:n,alt:r,title:t}):c("a",i(r,1),{href:n,title:t}))),e=n(a?e:s(e))},s=e=>g(e,[/([*_]{1,3})((.|\n)+?)\1/g,(e,r,n)=>(r=r.length,n=s(n),1<r&&(n=c("strong",n)),n=r%2?c("em",n):n),/(~{1,3})((.|\n)+?)\1/g,(e,r,n)=>c([,"u","s","del"][r.length],s(n)),/  \n|\n  /g,"<br>"],s),g=(e,r,n,t)=>{for(var l,a=0;a<r.length;){if(l=r[a++].exec(e))return n(e.slice(0,l.index),t)+("string"==typeof r[a]?r[a].replace(/\$(\d)/g,(e,r)=>l[r]):r[a].apply(this,l))+n(e.slice(l.index+l[0].length),t);a++}return e},o=(e,r)=>{e=e.replace(/[\r\v\b\f]/g,"").replace(/\\./g,e=>`&#${e.charCodeAt(1)};`);r=n(e,r);return(r=r!==e||r.match(/^[\s\n]*$/i)?r:i(r).replace(/((.|\n)+?)(\n\n+|$)/g,(e,r)=>c("p",r))).replace(/&#(\d+);/g,(e,r)=>String.fromCharCode(parseInt(r)))};return{parse:o,block:n,inline:s,inlineBlock:i}}();"undefined"!=typeof module&&(module.exports=microdown);